define(["jquery","handlebars","luminateExtend","moment","config","select2","bootstrap"],function(e,a,r,t,n){var i={};return i.buildSwitcher=function(a){var t,n,i,s,d,o=0,m=[],c=e("[name='go-fundraise'], .switch-events"),h=e("[name='my-event']"),f=e("[name='my-team']"),l=e("#event-chooser");if(!a.getRegisteredTeamraisersResponse||!a.getRegisteredTeamraisersResponse.teamraiser)return thm.cons.events=[],thm.config.removeEmptyDash?c.remove():c.attr("href","PageServer?pagename=relay_find_event&join=true"),void("rmwp"!=window.product&&(h.remove(),f.remove()));for(d=(i=r.utils.ensureArray(a.getRegisteredTeamraisersResponse.teamraiser)).length,t=0;t<d;t++)n=i[t],"123".search(n.status)>-1&&(o++,n.active=!0,m.unshift(n)),n.id!=thm.frid?n.other=!0:thm.event=n;if(thm.cons.events=m,e("body").trigger("events-loaded").data("events","loaded"),"rmwp"==window.product)var g=e("#basePathSecure").html()+"SPageServer?pagename=menwearpink_my_fundraising&fr_id=";else window.product.indexOf("active")>-1&&(g=e("#basePathSecure").html()+"SPageServer?pagename=active_my_fundraising&fr_id=");if(1==o){if("rmwp"!=window.product&&-1===window.product.indexOf("active")){var v="TRC?fr_id="+m[0].id;c.attr("href",v)}else c.attr("href",""+g+m[0].id).removeClass("hidden");thm.config.removeEmptyDash||c.click(function(){window.location=this.href});var u=e("#basePathSecure").text()+"STR?pg=entry&fr_id="+m[0].id;teamUrl=e("#basePathSecure").text()+"PageServer?pagename="+thm.config.productPrefix+"my_team&fr_id="+m[0].id,h.attr("href",u),thm.config.teamLinks&&f.attr("href",teamUrl)}else{for("rmwp"===window.product&&c.removeClass("hidden"),t=0;t<m.length;t++)(n=m[t]).active&&("rmwp"!=window.product?(v=thm.theme.indexOf("active")>-1?""+g+n.id:"TRC?fr_id="+n.id,s=e("<li class='dashboard'><a href='"+v+"'>"+n.name+"</a></li>\n")):s=e('<li class="dashboard"><a href="'+g+n.id+'">'+n.name+"</a></li>\n"),s=s.add(e('<li class="event"><a href="'+e("#basePathSecure").text()+"STR?pg=entry&fr_id="+n.id+'">'+n.name+"</a></li>\n")),n.other?l.find("ul").append(s):l.find("ul").prepend(s));"rmwp"===window.product&&c.removeClass("hidden"),c.click(function(){l.removeClass("team event").addClass("dashboard"),l.modal()}),h.click(function(){l.removeClass("team dashboard").addClass("event"),l.modal()})}if(sessionStorage.signingin&&thm.config.sessionSignIn)if(sessionStorage.removeItem("signingin"),"rfl"!==window.product&&m.length){if(1===m.length&&e("body").hasClass("page-MSABC_CY18_Avon_Rep_survey"))return;"donate_now"!==thm.page&&e("[name=go-fundraise]")[0].click()}else i.length&&"donate_now"!==thm.page&&e("[name=go-fundraise]").eq(0).click()},i});