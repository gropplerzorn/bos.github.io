define(["jquery","luminateExtend"],function(e,s){var t=window.THM;function a(e){var t,a,r="method="+e.method,n=e.responseName||e.method+"Response",o=e.errorName||"errorResponse";for(t in e.params)if((a=e.params[t]||"").shift)for(;a.length;)r+="&"+t+"="+a.shift();else r+="&"+t+"="+a;s.api.request({api:e.api||"teamraiser",data:r,useHTTPS:!0,requiresAuth:e.auth||!1,callback:function(s){return s[n]?e.callback(s[n]):s[o]?e.callback(!1,s[o]):e.callback(!1,{code:"-999",message:"Unknown Error"})}})}t.getParticipantsForEvent=function(r,n){var o,i,l,p,c;o={method:"getParticipants",responseName:"getParticipantsResponse",params:{list_ascending:!1,list_sort_column:"total",first_name:"%25%25%25",fr_id:t.frid},resultType:"participant",options:n,callback:r},l=o.callback,c={count:0,results:p=[],type:o.resultType,iters:0},o.responseName=o.responseName||o.method+"Response",o.callback=function(t){var r=t.totalNumberResults,n=s.utils.ensureArray(t[o.resultType]);return r>-1||!o.noCount||(r=n.length),c.iters++,r>-1&&!i?l({count:r,results:n,type:o.resultType}):(e.merge(p,n),i?p.length<r?(o.params.list_page_offset++,a(o)):(c.count=p.length,l(c)):t.errorResponse?l(!1,t.errorResponse):l(!1,{code:"-999",message:"Unknown Error"}))},o.params.list_page_size=o.params.list_page_size||250,o.params.list_page_offset=o.params.list_page_offset||0,a(o)}});